---
title: "import  R"
author: "許循閒"
date: "2019年3月11日"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
rm(list=ls())
etf4<-read.table("ETF4_2000_2018_d.txt", fileEncoding = "UTF-8-BOM")
head(etf4)
etf4<-read.table("ETF4_2000_2018_d_ansi.txt", header = T)
str(etf4)
etf4<-read.table("ETF4_2000_2018_d_ansi.txt", header = T, stringsAsFactors = T, 
                 colClasses = c("證券代碼"="character"))
str(etf4)
head(etf4)
etf4<-read.csv("ETF4_2000_2018_d.csv", colClasses = c("證券代碼"="character"))
str(etf4)
etf4.csv<-read.csv("ETF4_2000_2018_d.csv", fileEncoding='big5', 
                   colClasses=c('factor', 'factor', 'factor', 'numeric', 'numeric'))
head(etf4.csv)
str(etf4.csv)
```
#rm=remove
#ls()=是設定為空的
#rm(list=ls())=可以把所有的資料清除
#txt.=文字檔  (read.table.)
#header=是要有表投的意思
#head/tail 是看前/後幾筆資料
#str=structure
#int=整數
#stringsAsFactors 使字串變成文字分類
#colclasses=c 欄位的屬性
#col=列
#c(欄,列)的c代表連結
#colnames=欄位名稱
#fileEncoding='big5'(有亂碼時改編碼方式)

```{r}
library(readr)
etf4_csv<-read_csv("ETF4_2000_2018_d.csv")
etf4_csv<-read_csv("ETF4_2000_2018_d.csv", locale = locale(encoding='big5'))
head(etf4_csv)
str(etf4_csv)
library(readxl)
etf4_xls<-read_excel("ETF4_2000_2018_d.xls", 
                     col_types =c("text", "text","text", "numeric","numeric"))
head(etf4_xls)
etf4.c<-etf4_csv[, c(-2, -4)]
etf4.c<-etf4.c[-1,]
colnames(etf4.c)<-c("id", "date", "price")
library(magrittr)
library(dplyr)
etf4.c<-etf4_csv%>%select(c(1,3,5))%>%rename("id" = "證券代碼", "date"= "日期", "price" = "當日均價(元)")
etf4.c
```
#csv檔用readr(要先安裝程式)
#library(readr) 執行
#etf4_xls<-read_excel("ETF4_2000_2018_d.xls", col_types =c("text", "text","text", "numeric","numeric")) 結果會是date.frame 的形式
#library(readxl) 執行
#etf4.c$ (看哪一個欄位)
#library(readxl) 執行

```{r}
library(reshape2)
etf4.reorder = dcast(etf4.c, date~id)
dim(etf4.reorder)
head(etf4.reorder)
str(etf4.reorder)
etf4.reorder$date<-as.Date(as.character(etf4.reorder$date), "%Y%m%d") 
head(etf4.reorder)
str(etf4.reorder)
```

```{r}
library(xts)
etf4.xts<-xts(etf4.reorder[,-1], order.by = etf4.reorder$date)
head(etf4.xts)
tail(etf4.xts)
str(etf4.xts)
```


```{r}

```















